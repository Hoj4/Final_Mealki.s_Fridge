<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.itwillbs.mappers.productionMapper">
	<select id="ProductionList" resultType="com.itwillbs.domain.ProductionDTO">
<!--         select * from employee -->
<!--         where emp_num = #{emp_num} and emp_pass = #{emp_pass} -->
    </select>
    
    
    <!-- 	https://mybatis.org/mybatis-3/ -->
    <resultMap type="map" id="productionMap">
<!--    column="디비열이름" property="멤버변수이름" -->
    	<id column="manu_num" property="manu_num"/>
    	<result property="wo_num" column="wo_num"/>
    	<result column="manu_name" property="manu_name"/>
    	<result column="item_name" property="item_name"/>
    	<result column="emp_Kname" property="emp_Kname"/>
    	<result column="manu_sdate" property="manu_sdate"/>
    	<result column="manu_date" property="manu_date"/>
    </resultMap>
    
    <select id="getProductionListMap" resultMap="productionMap">
    	select * from productstatus
    	<where>
    		<if test="wo_num != null and !wo_num.equals('')">wo_num like CONCAT('%',#{wo_num},'%') </if>
			<if test="manu_name != null and !manu_name.equals('')">OR manu_name like CONCAT('%',#{manu_name},'%')</if>
			<if test="item_name != null and !item_name.equals('')">OR item_name like CONCAT('%',#{item_name},'%')</if>
			<if test="emp_Kname != null and !emp_Kname.equals('')">OR emp_Kname like CONCAT('%',#{emp_Kname},'%')</if>
<!-- 			작업 보류 -->
			<if test="manu_date != null and !manu_date.equals('')">OR manu_date between #{manu_date} and #{manu_date}</if>
    	</where>
    </select>
    
    <select id="getemp_Knamesession" resultType="com.itwillbs.domain.ProductionDTO">
    	select distinct e.emp_num, e.emp_Kname
    	from employee e join productstatus p
		on e.emp_kname = p.emp_kname
		where emp_num = #{emp_num}
    </select>
        
<!--     <insert id="getemp_Knamesession"> -->
<!--     	insert into team1_milki(manu_sdate) value(now()) -->
<!--     </insert> -->

</mapper>