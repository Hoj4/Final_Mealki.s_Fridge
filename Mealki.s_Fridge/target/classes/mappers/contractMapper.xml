<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">


<mapper namespace="com.itwillbs.mappers.contractMapper">

<!-- 	id="이름" sql구문 하나 하나 이름 
        ? 대신에 BoardDTO 멤버변수명 #{id} -->
	 <insert id="contractInsertBoard">
    	INSERT INTO contract(business_num,
    						cust_num,
    						item_num,
    						item_name,
    						business_name,
    						business_date,
    						out_date,
    						incharge_code,
    						incharge_name,
    						contract_qty) 
    	VALUES(#{business_num},
    			#{cust_num},
    			#{item_num},
    			#{item_name},
    			#{business_name},
    			#{business_date},
    			#{out_date},
    			#{incharge_code},
    			#{incharge_name},
    			#{contract_qty})
    </insert>
	
	<select id="getBoardList" resultType="com.itwillbs.domain.ContractDTO">
        SELECT * from contract
        
        <if test="search_option == 'item_name'.toString()">
        where item_name  like CONCAT('%',#{search},'%')
        </if>
        <if test="search_option == 'business_name'.toString()">
        where business_name  like CONCAT('%',#{search},'%')
        </if>
        order by business_num desc
		limit #{startRow}, #{pageSize}
    </select>
    
<!-- 검색어 -->
	 <select id="getContractCount" resultType="java.lang.Integer">
        select count(*) from contract 
       
        <if test="search_option == 'item_name'.toString()">
        where item_name  like CONCAT('%',#{search},'%')
        </if>
        <if test="search_option == 'business_name'.toString()">
        where business_name  like CONCAT('%',#{search},'%')
        </if>
        
      
    </select>

	 <select id="selectContractTotal" resultType="java.lang.Integer">
    	SELECT COUNT(*) total FROM contract
    </select>


	<select id="getContractListMap" resultType="map">
		SELECT *
		FROM contract, customer
		WHERE contract.cust_num = customer.cust_num
		
	</select>
	
	<select id="getBoard" resultType="com.itwillbs.domain.ContractDTO">
		select * from contract
		where business_num = #{business_num}
	</select>












</mapper>